<svg viewBox="0 0 1600 416"  version="1.1" xmlns="http://www.w3.org/2000/svg">
<path d="M64,64 L1568,64 " stroke="black"/>
<text dominant-baseline="central" text-anchor="end" font-family="monospace" font-size="12" x="64" y="64">q0</text>
<path d="M64,128 L1568,128 " stroke="black"/>
<text dominant-baseline="central" text-anchor="end" font-family="monospace" font-size="12" x="64" y="128">q1</text>
<path d="M64,192 L1568,192 " stroke="black"/>
<text dominant-baseline="central" text-anchor="end" font-family="monospace" font-size="12" x="64" y="192">q2</text>
<path d="M64,256 L1568,256 " stroke="black"/>
<text dominant-baseline="central" text-anchor="end" font-family="monospace" font-size="12" x="64" y="256">q3</text>
<path d="M64,320 L1568,320 " stroke="black"/>
<text dominant-baseline="central" text-anchor="end" font-family="monospace" font-size="12" x="64" y="320">q4</text>
<rect x="80" y="48" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="96" y="64">R</text>
<rect x="80" y="112" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="96" y="128">R</text>
<rect x="80" y="176" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="96" y="192">R</text>
<rect x="80" y="240" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="96" y="256">R</text>
<rect x="80" y="304" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="96" y="320">R</text>
<path d="M160,64 L160,128 " stroke="black"/>
<circle cx="160" cy="64" r="8" stroke="none" fill="black"/>
<circle cx="160" cy="128" r="8" stroke="black" fill="white"/>
<path d="M152,128 L168,128 M160,120 L160,136 " stroke="black"/>
<path d="M160,192 L160,256 " stroke="black"/>
<circle cx="160" cy="192" r="8" stroke="none" fill="black"/>
<circle cx="160" cy="256" r="8" stroke="black" fill="white"/>
<path d="M152,256 L168,256 M160,248 L160,264 " stroke="black"/>
<path d="M224,128 L224,192 " stroke="black"/>
<circle cx="224" cy="192" r="8" stroke="none" fill="black"/>
<circle cx="224" cy="128" r="8" stroke="black" fill="white"/>
<path d="M216,128 L232,128 M224,120 L224,136 " stroke="black"/>
<path d="M224,256 L224,320 " stroke="black"/>
<circle cx="224" cy="320" r="8" stroke="none" fill="black"/>
<circle cx="224" cy="256" r="8" stroke="black" fill="white"/>
<path d="M216,256 L232,256 M224,248 L224,264 " stroke="black"/>
<rect x="272" y="112" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="288" y="128">MR</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="288" y="108">rec[0]</text>
<rect x="272" y="240" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="288" y="256">MR</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="288" y="236">rec[1]</text>
<rect x="336" y="112" width="160" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="416" y="128">DETECTOR</text>
<text dominant-baseline="hanging" text-anchor="middle" font-family="monospace" font-size="8" x="416" y="148">coords=(1,0)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="416" y="108">D0 = rec[0]</text>
<rect x="336" y="240" width="160" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="416" y="256">DETECTOR</text>
<text dominant-baseline="hanging" text-anchor="middle" font-family="monospace" font-size="8" x="416" y="276">coords=(3,0)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="416" y="236">D1 = rec[1]</text>
<path d="M260,40 L260,32 L508,32 L508,40 " stroke="black" fill="none"/>
<path d="M260,376 L260,384 L508,384 L508,376 " stroke="black" fill="none"/>
<path d="M552,32 L544,32 L544,384 L552,384 " stroke="black" fill="none"/>
<text dominant-baseline="auto" text-anchor="start" font-family="monospace" font-size="12" x="548" y="380">REP9</text>
<path d="M672,64 L672,128 " stroke="black"/>
<circle cx="672" cy="64" r="8" stroke="none" fill="black"/>
<circle cx="672" cy="128" r="8" stroke="black" fill="white"/>
<path d="M664,128 L680,128 M672,120 L672,136 " stroke="black"/>
<path d="M672,192 L672,256 " stroke="black"/>
<circle cx="672" cy="192" r="8" stroke="none" fill="black"/>
<circle cx="672" cy="256" r="8" stroke="black" fill="white"/>
<path d="M664,256 L680,256 M672,248 L672,264 " stroke="black"/>
<path d="M736,128 L736,192 " stroke="black"/>
<circle cx="736" cy="192" r="8" stroke="none" fill="black"/>
<circle cx="736" cy="128" r="8" stroke="black" fill="white"/>
<path d="M728,128 L744,128 M736,120 L736,136 " stroke="black"/>
<path d="M736,256 L736,320 " stroke="black"/>
<circle cx="736" cy="320" r="8" stroke="none" fill="black"/>
<circle cx="736" cy="256" r="8" stroke="black" fill="white"/>
<path d="M728,256 L744,256 M736,248 L736,264 " stroke="black"/>
<rect x="784" y="112" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="800" y="128">MR</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="800" y="108">rec[2+iter*2]</text>
<rect x="784" y="240" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="800" y="256">MR</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="800" y="236">rec[3+iter*2]</text>
<rect x="848" y="112" width="224" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="960" y="128">DETECTOR</text>
<text dominant-baseline="hanging" text-anchor="middle" font-family="monospace" font-size="8" x="960" y="148">coords=(1,1+iter)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="960" y="108">D[2+iter*2] = rec[2+iter*2]*rec[0+iter*2]</text>
<rect x="848" y="240" width="224" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="960" y="256">DETECTOR</text>
<text dominant-baseline="hanging" text-anchor="middle" font-family="monospace" font-size="8" x="960" y="276">coords=(3,1+iter)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="960" y="236">D[3+iter*2] = rec[3+iter*2]*rec[1+iter*2]</text>
<path d="M772,40 L772,32 L1084,32 L1084,40 " stroke="black" fill="none"/>
<path d="M772,376 L772,384 L1084,384 L1084,376 " stroke="black" fill="none"/>
<path d="M1112,32 L1120,32 L1120,384 L1112,384 " stroke="black" fill="none"/>
<rect x="1168" y="48" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="1184" y="64">M</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="1184" y="44">rec[20]</text>
<rect x="1168" y="176" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="1184" y="192">M</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="1184" y="172">rec[21]</text>
<rect x="1168" y="304" width="32" height="32" stroke="black" fill="white"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="1184" y="320">M</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="1184" y="300">rec[22]</text>
<rect x="1232" y="48" width="288" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="1376" y="64">DETECTOR</text>
<text dominant-baseline="hanging" text-anchor="middle" font-family="monospace" font-size="8" x="1376" y="84">coords=(1,10)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="1376" y="44">D20 = rec[21]*rec[20]*rec[18]</text>
<rect x="1232" y="176" width="288" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="1376" y="192">DETECTOR</text>
<text dominant-baseline="hanging" text-anchor="middle" font-family="monospace" font-size="8" x="1376" y="212">coords=(3,10)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="1376" y="172">D21 = rec[22]*rec[21]*rec[19]</text>
<rect x="1232" y="304" width="160" height="32" stroke="black" fill="lightgray"/>
<text dominant-baseline="central" text-anchor="middle" font-family="monospace" font-size="16" x="1312" y="320">OBS_INCLUDE(0)</text>
<text text-anchor="middle" font-family="monospace" font-size="8" x="1312" y="300">L0 *= rec[22]</text>
</svg>